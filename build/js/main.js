"use strict";

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

//button
var btn = document.querySelector('.buy__button');
var image = document.querySelector('.border');

btn.onmouseover = function (e) {
  image.classList.add('sprint');
};

btn.onmouseout = function (e) {
  image.classList.remove('sprint');
}; //тут перемещаем стрелочки влево, когда процент больше 88


var secondProgress = document.querySelector('.buy__info-progress .myProgress');
var arrowsProgress = document.querySelector('.buy__info-progress .myProgress .arrow-right');
var computedStyleProgress = getComputedStyle(secondProgress);
var progressPercent = computedStyleProgress.width;
console.log(progressPercent);

if (progressPercent >= '535.031px') {
  arrowsProgress.classList.add('_bigPercent');
} else {
  arrowsProgress.classList.remove('_bigPercent');
} // Slider


var counterSlide = 1;
var sliderCount = document.querySelector('.counter');
var prizesLeftArrow = document.querySelector('.controls-left'),
    prizesRightArrow = document.querySelector('.controls-right');
var slider1 = slider('prizes-slider', '.auto__buy-slider-item', prizesLeftArrow, prizesRightArrow, true);

function slider(id, itemSelector, leftArrow, rightArrow, autoplay, config) {
  var AUTOPLAY_INTERVAL = 5000000000000;
  var el = document.getElementById(id);
  el.classList.add('slider');
  var mediaStep = '';
  var activeIndIndex = 0;
  var toogleIndex = 0;
  var items = el.querySelectorAll(itemSelector);
  var timerId;

  function getMediaStep() {
    var width = window.innerWidth;
    var newStep = width > (obj.config.media && obj.config.media.lg) ? 'lg' : width > (obj.config.media && obj.config.media.md) ? 'md' : width > (obj.config.media && obj.config.media.sm) ? 'sm' : 'xs';

    if (mediaStep !== newStep) {
      mediaStep = newStep;
      obj.buildSlider();
    }
  }

  function getItemsQuantity() {
    return obj.config.elemsPerPage[mediaStep];
  }

  function onResize() {
    getMediaStep();
  }

  var obj = {
    activeIndex: 0,
    activeIndIndex: activeIndIndex > 0 ? activeIndIndex : 0,
    toggleIndex: 0,
    init: function init() {
      getMediaStep();
      var startX = 0;
      var touched = false;
      var inner = el.querySelector('.slider-inner');
      var indicators = el.querySelectorAll('.slider-indicator');

      function onMouseDown(e) {
        startX = e.clientX || e.touches[0].clientX;
        touched = true;
        var weekly = document.querySelectorAll('.result__weeks-btn'); // for (const item of weekly) item.addEventListener('touchstart', selectWeek);
      }

      function onMouseMove(e) {
        e.preventDefault();

        if (touched) {
          inner = inner || el.querySelector('.slider-inner');
          var x = e.clientX || e.touches[0].clientX;
          var diff = x - startX;

          if (diff < 0 && activeIndIndex < indicators.length - 1 || diff > 0 && activeIndIndex > 0) {
            inner.style.transform = 'translateX(' + diff + 'px)';
          }
        }
      }

      function onMouseEnd(e) {
        if (touched) {
          var x = e.clientX || e.changedTouches[0].clientX;

          if (x - startX > 30) {
            toggleIndex(activeIndIndex - 1);
          } else if (startX - x > 30) {
            toggleIndex(activeIndIndex + 1);
          }

          inner = inner || el.querySelector('.slider-inner');
          inner.style.transform = '';
        }

        touched = false;
      }

      rightArrow.addEventListener('click', function () {
        toggleIndex(activeIndIndex + 1); // obj.next()

        counterSlide++;
        sliderCount.innerHTML = counterSlide;
      });
      leftArrow.addEventListener('click', function () {
        toggleIndex(activeIndIndex - 1); // obj.prev()

        counterSlide--;
        sliderCount.innerHTML = counterSlide;
      });
      window.removeEventListener('resize', onResize);
      window.addEventListener('resize', onResize);
      el.removeEventListener('mousedown', onMouseDown);
      el.removeEventListener('touchstart', onMouseDown);
      el.addEventListener('mousedown', onMouseDown);
      el.addEventListener('touchstart', onMouseDown);
      el.removeEventListener('mousemove', onMouseMove);
      el.removeEventListener('touchmove', onMouseMove);
      el.addEventListener('mousemove', onMouseMove); // el.addEventListener('touchmove', onMouseMove);

      window.removeEventListener('mouseup', onMouseEnd);
      window.removeEventListener('touchend', onMouseEnd);
      window.addEventListener('mouseup', onMouseEnd);
      window.addEventListener('touchend', onMouseEnd);

      if (autoplay) {
        timerId = setInterval(function () {
          return toggleIndex((activeIndIndex + 1) % indicators.length);
        }, AUTOPLAY_INTERVAL);
      }

      return obj;
    },
    config: {
      elemsPerPage: _objectSpread(_objectSpread({}, {
        'lg': 1,
        'md': 1,
        'sm': 1,
        'xs': 1
      }), config && config.elemsPerPage || {}),
      media: _objectSpread(_objectSpread({}, {
        'lg': 1160,
        'md': 920,
        'sm': 700
      }), config && config.media || {})
    },
    buildSlider: function buildSlider() {
      obj.removeSlider();
      var wrapper = document.createElement("div");
      wrapper.className = 'slider-wrapper';
      var inner = document.createElement("div");
      inner.className = 'slider-inner';
      wrapper.appendChild(inner);
      el.appendChild(wrapper);

      if (obj.config.elemsPerPage[mediaStep] >= items.length + 1) {
        el.classList.add('not-enough-elems');
        return;
      }

      buildPages();
    },
    //     getMediaStep() {
    //     // var width = window.innerWidth;
    //     // var newStep = width > mediaConfig && mediaConfig.lg !== undefined ? mediaConfig.lg : 1150 ? 'lg'
    //     //     : width > (mediaConfig && mediaConfig.md !== undefined ? mediaConfig.md : 767) ? 'md'
    //     //         : width > (mediaConfig && mediaConfig.sm !== undefined ? mediaConfig.sm : 600) ? 'sm' : 'xs';
    //
    //     if (mediaStep !== newStep) {
    //         mediaStep = newStep;
    //         obj.buildSlider();
    //     }
    // },
    removeSlider: function removeSlider() {
      var wrapper = el.querySelector('.slider-wrapper');
      el.classList.remove('not-enough-elems');
      wrapper && wrapper.remove();

      if (timerId) {
        clearInterval(timerId);
      }
    },
    toggle: toggleIndex
  };

  function buildIndicators() {
    var prevInd = el.querySelector('.slider-indicators');
    prevInd && prevInd.remove();
    var indicators = document.createElement('div');
    indicators.classList.add('slider-indicators');

    var _loop = function _loop(i) {
      var indicator = document.createElement('div');
      indicator.classList.add('slider-indicator');

      if (i === activeIndIndex) {
        indicator.classList.add('active');
      }

      indicator.setAttribute('index', i);
      indicator.addEventListener('click', function () {
        toggleIndex(i);
      });
      indicators.appendChild(indicator);
    };

    for (var i = 0; i < Math.ceil(items.length / getItemsQuantity()); i++) {
      _loop(i);
    }

    var wrapper = el.querySelector('.slider-wrapper');
    wrapper.appendChild(indicators);
  }

  function buildPages(step) {
    step = step || 1;
    var pagePrev = buildPage(obj.activeIndex + items.length - getItemsQuantity() * step);
    var pageCurrent = buildPage(obj.activeIndex);
    var pageNext = buildPage(obj.activeIndex + getItemsQuantity() * step);
    var inner = el.querySelector('.slider-inner');

    if (getItemsQuantity() < items.length) {
      buildIndicators();

      if (!el.querySelector('.slider-indicator.active')) {// toggleIndex(0);
      }
    }

    inner.innerHTML = '';
    inner.appendChild(pagePrev);
    inner.appendChild(pageCurrent);
    inner.appendChild(pageNext);
  }

  function buildPage(index) {
    var page = document.createElement("div");
    page.classList.add('slider-page');

    for (var i = index; i < index + getItemsQuantity(); i++) {
      var item = items[i % items.length];
      var newItem = item.cloneNode(true);
      page.appendChild(newItem);
    }

    return page;
  }

  function toggleIndex(index) {
    var indActive = el.querySelector('.slider-indicator.active');
    var indicators = el.querySelectorAll('.slider-indicator');

    if (!indicators[index]) {
      return;
    }

    leftArrow.classList.remove('arrow-disabled');
    rightArrow.classList.remove('arrow-disabled');

    if (index === 0) {
      leftArrow.classList.add('arrow-disabled');
    }

    if (index === indicators.length - 1) {
      rightArrow.classList.add('arrow-disabled');
    }

    indActive && indActive.classList.remove('active');
    indicators[index] && indicators[index].classList.add('active');

    if (index > activeIndIndex) {
      index - activeIndIndex > 1 && buildPages(index - activeIndIndex);
      obj.next();
    } else if (index < activeIndIndex) {
      activeIndIndex - index > 1 && buildPages(activeIndIndex - index);
      obj.prev();
    }

    activeIndIndex = index; // document.querySelector('.current').textContent = activeIndIndex + 1;
  }

  obj.prev = function () {
    var wrapper = el.querySelector('.slider-wrapper');
    wrapper.classList.add('prev');
    setTimeout(function () {
      wrapper.classList.remove('prev');
      obj.activeIndex = (obj.activeIndex - getItemsQuantity() + items.length) % items.length;
      buildPages();
    }, 300);
  };

  obj.next = function () {
    var wrapper = el.querySelector('.slider-wrapper');
    wrapper.classList.add('next');
    setTimeout(function () {
      wrapper.classList.remove('next');
      obj.activeIndex = (obj.activeIndex + getItemsQuantity() + items.length) % items.length;
      buildPages();
    }, 300);
  };

  return obj.init();
}
"use strict";
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJzZWNvbmQuanMiXSwibmFtZXMiOlsiYnRuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW1hZ2UiLCJvbm1vdXNlb3ZlciIsImUiLCJjbGFzc0xpc3QiLCJhZGQiLCJvbm1vdXNlb3V0IiwicmVtb3ZlIiwic2Vjb25kUHJvZ3Jlc3MiLCJhcnJvd3NQcm9ncmVzcyIsImNvbXB1dGVkU3R5bGVQcm9ncmVzcyIsImdldENvbXB1dGVkU3R5bGUiLCJwcm9ncmVzc1BlcmNlbnQiLCJ3aWR0aCIsImNvbnNvbGUiLCJsb2ciLCJjb3VudGVyU2xpZGUiLCJzbGlkZXJDb3VudCIsInByaXplc0xlZnRBcnJvdyIsInByaXplc1JpZ2h0QXJyb3ciLCJzbGlkZXIxIiwic2xpZGVyIiwiaWQiLCJpdGVtU2VsZWN0b3IiLCJsZWZ0QXJyb3ciLCJyaWdodEFycm93IiwiYXV0b3BsYXkiLCJjb25maWciLCJBVVRPUExBWV9JTlRFUlZBTCIsImVsIiwiZ2V0RWxlbWVudEJ5SWQiLCJtZWRpYVN0ZXAiLCJhY3RpdmVJbmRJbmRleCIsInRvb2dsZUluZGV4IiwiaXRlbXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwidGltZXJJZCIsImdldE1lZGlhU3RlcCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJuZXdTdGVwIiwib2JqIiwibWVkaWEiLCJsZyIsIm1kIiwic20iLCJidWlsZFNsaWRlciIsImdldEl0ZW1zUXVhbnRpdHkiLCJlbGVtc1BlclBhZ2UiLCJvblJlc2l6ZSIsImFjdGl2ZUluZGV4IiwidG9nZ2xlSW5kZXgiLCJpbml0Iiwic3RhcnRYIiwidG91Y2hlZCIsImlubmVyIiwiaW5kaWNhdG9ycyIsIm9uTW91c2VEb3duIiwiY2xpZW50WCIsInRvdWNoZXMiLCJ3ZWVrbHkiLCJvbk1vdXNlTW92ZSIsInByZXZlbnREZWZhdWx0IiwieCIsImRpZmYiLCJsZW5ndGgiLCJzdHlsZSIsInRyYW5zZm9ybSIsIm9uTW91c2VFbmQiLCJjaGFuZ2VkVG91Y2hlcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJpbm5lckhUTUwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0SW50ZXJ2YWwiLCJyZW1vdmVTbGlkZXIiLCJ3cmFwcGVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImFwcGVuZENoaWxkIiwiYnVpbGRQYWdlcyIsImNsZWFySW50ZXJ2YWwiLCJ0b2dnbGUiLCJidWlsZEluZGljYXRvcnMiLCJwcmV2SW5kIiwiaSIsImluZGljYXRvciIsInNldEF0dHJpYnV0ZSIsIk1hdGgiLCJjZWlsIiwic3RlcCIsInBhZ2VQcmV2IiwiYnVpbGRQYWdlIiwicGFnZUN1cnJlbnQiLCJwYWdlTmV4dCIsImluZGV4IiwicGFnZSIsIml0ZW0iLCJuZXdJdGVtIiwiY2xvbmVOb2RlIiwiaW5kQWN0aXZlIiwibmV4dCIsInByZXYiLCJzZXRUaW1lb3V0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0EsSUFBTUEsR0FBRyxHQUFHQyxRQUFRLENBQUNDLGFBQVQsQ0FBdUIsY0FBdkIsQ0FBWjtBQUNBLElBQU1DLEtBQUssR0FBR0YsUUFBUSxDQUFDQyxhQUFULENBQXVCLFNBQXZCLENBQWQ7O0FBQ0FGLEdBQUcsQ0FBQ0ksV0FBSixHQUFrQixVQUFVQyxDQUFWLEVBQVk7RUFDMUJGLEtBQUssQ0FBQ0csU0FBTixDQUFnQkMsR0FBaEIsQ0FBb0IsUUFBcEI7QUFDSCxDQUZEOztBQUdBUCxHQUFHLENBQUNRLFVBQUosR0FBaUIsVUFBVUgsQ0FBVixFQUFZO0VBQ3pCRixLQUFLLENBQUNHLFNBQU4sQ0FBZ0JHLE1BQWhCLENBQXVCLFFBQXZCO0FBQ0gsQ0FGRCxDLENBSUE7OztBQUNBLElBQU1DLGNBQWMsR0FBR1QsUUFBUSxDQUFDQyxhQUFULENBQXVCLGlDQUF2QixDQUF2QjtBQUNBLElBQU1TLGNBQWMsR0FBR1YsUUFBUSxDQUFDQyxhQUFULENBQXVCLDhDQUF2QixDQUF2QjtBQUNBLElBQUlVLHFCQUFxQixHQUFHQyxnQkFBZ0IsQ0FBQ0gsY0FBRCxDQUE1QztBQUNB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SixHQUFrQkgsZ0JBQWdCLEVBQWxDLEdBQXVDYixLQUFLLENBQUMrQixNQUE5QyxJQUF3RC9CLEtBQUssQ0FBQytCLE1BQWhGO01BQ0FjLFVBQVU7SUFDYixDQUpTLEVBSVAsR0FKTyxDQUFWO0VBS0gsQ0FSRDs7RUFTQSxPQUFPdEMsR0FBRyxDQUFDVyxJQUFKLEVBQVA7QUFDSDtBQ3JURCIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy9idXR0b25cbmNvbnN0IGJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXlfX2J1dHRvbicpO1xuY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYm9yZGVyJylcbmJ0bi5vbm1vdXNlb3ZlciA9IGZ1bmN0aW9uIChlKXtcbiAgICBpbWFnZS5jbGFzc0xpc3QuYWRkKCdzcHJpbnQnKVxufVxuYnRuLm9ubW91c2VvdXQgPSBmdW5jdGlvbiAoZSl7XG4gICAgaW1hZ2UuY2xhc3NMaXN0LnJlbW92ZSgnc3ByaW50Jylcbn1cblxuLy/RgtGD0YIg0L/QtdGA0LXQvNC10YnQsNC10Lwg0YHRgtGA0LXQu9C+0YfQutC4INCy0LvQtdCy0L4sINC60L7Qs9C00LAg0L/RgNC+0YbQtdC90YIg0LHQvtC70YzRiNC1IDg4XG5jb25zdCBzZWNvbmRQcm9ncmVzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXlfX2luZm8tcHJvZ3Jlc3MgLm15UHJvZ3Jlc3MnKVxuY29uc3QgYXJyb3dzUHJvZ3Jlc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV5X19pbmZvLXByb2dyZXNzIC5teVByb2dyZXNzIC5hcnJvdy1yaWdodCcpXG5sZXQgY29tcHV0ZWRTdHlsZVByb2dyZXNzID0gZ2V0Q29tcHV0ZWRTdHlsZShzZWNvbmRQcm9ncmVzcyk7XG5sZXQgcHJvZ3Jlc3NQZXJjZW50ID0gY29tcHV0ZWRTdHlsZVByb2dyZXNzLndpZHRoO1xuY29uc29sZS5sb2cocHJvZ3Jlc3NQZXJjZW50KTtcbmlmKHByb2dyZXNzUGVyY2VudCA+PSAnNTM1LjAzMXB4Jyl7XG4gICAgYXJyb3dzUHJvZ3Jlc3MuY2xhc3NMaXN0LmFkZCgnX2JpZ1BlcmNlbnQnKVxufSBlbHNlIHsgYXJyb3dzUHJvZ3Jlc3MuY2xhc3NMaXN0LnJlbW92ZSgnX2JpZ1BlcmNlbnQnKSB9XG5cblxuLy8gU2xpZGVyXG5cbmxldCBjb3VudGVyU2xpZGUgPSAxO1xubGV0IHNsaWRlckNvdW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvdW50ZXInKTtcblxuXG5sZXQgcHJpemVzTGVmdEFycm93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRyb2xzLWxlZnQnKSxcbiAgICBwcml6ZXNSaWdodEFycm93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRyb2xzLXJpZ2h0Jyk7XG5cbnZhciBzbGlkZXIxID0gc2xpZGVyKFxuICAgICdwcml6ZXMtc2xpZGVyJyxcbiAgICAnLmF1dG9fX2J1eS1zbGlkZXItaXRlbScsXG4gICAgcHJpemVzTGVmdEFycm93LCBwcml6ZXNSaWdodEFycm93LCB0cnVlKTtcblxuZnVuY3Rpb24gc2xpZGVyKGlkLCBpdGVtU2VsZWN0b3IsIGxlZnRBcnJvdywgcmlnaHRBcnJvdywgYXV0b3BsYXksIGNvbmZpZykge1xuICAgIGNvbnN0IEFVVE9QTEFZX0lOVEVSVkFMID0gNTAwMDAwMDAwMDAwMDtcblxuICAgIHZhciBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICBlbC5jbGFzc0xpc3QuYWRkKCdzbGlkZXInKVxuICAgIHZhciBtZWRpYVN0ZXAgPSAnJztcbiAgICB2YXIgYWN0aXZlSW5kSW5kZXggPSAwO1xuICAgIHZhciB0b29nbGVJbmRleCA9IDA7XG4gICAgdmFyIGl0ZW1zID0gZWwucXVlcnlTZWxlY3RvckFsbChpdGVtU2VsZWN0b3IpO1xuICAgIHZhciB0aW1lcklkO1xuXG4gICAgZnVuY3Rpb24gZ2V0TWVkaWFTdGVwKCkge1xuICAgICAgICB2YXIgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgdmFyIG5ld1N0ZXAgPSB3aWR0aCA+IChvYmouY29uZmlnLm1lZGlhICYmIG9iai5jb25maWcubWVkaWEubGcpID8gJ2xnJ1xuICAgICAgICAgICAgOiB3aWR0aCA+IChvYmouY29uZmlnLm1lZGlhICYmIG9iai5jb25maWcubWVkaWEubWQpID8gJ21kJ1xuICAgICAgICAgICAgICAgIDogd2lkdGggPiAob2JqLmNvbmZpZy5tZWRpYSAmJiBvYmouY29uZmlnLm1lZGlhLnNtKSA/ICdzbScgOiAneHMnO1xuXG4gICAgICAgIGlmIChtZWRpYVN0ZXAgIT09IG5ld1N0ZXApIHtcbiAgICAgICAgICAgIG1lZGlhU3RlcCA9IG5ld1N0ZXA7XG4gICAgICAgICAgICBvYmouYnVpbGRTbGlkZXIoKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gZ2V0SXRlbXNRdWFudGl0eSgpIHtcbiAgICAgICAgcmV0dXJuIG9iai5jb25maWcuZWxlbXNQZXJQYWdlW21lZGlhU3RlcF1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvblJlc2l6ZSgpIHtcbiAgICAgICAgZ2V0TWVkaWFTdGVwKClcbiAgICB9XG5cbiAgICB2YXIgb2JqID0ge1xuICAgICAgICBhY3RpdmVJbmRleDogMCxcbiAgICAgICAgYWN0aXZlSW5kSW5kZXg6IGFjdGl2ZUluZEluZGV4ID4gMCA/IGFjdGl2ZUluZEluZGV4IDogMCxcbiAgICAgICAgdG9nZ2xlSW5kZXg6IDAsXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGdldE1lZGlhU3RlcCgpO1xuXG4gICAgICAgICAgICB2YXIgc3RhcnRYID0gMFxuICAgICAgICAgICAgdmFyIHRvdWNoZWQgPSBmYWxzZVxuXG4gICAgICAgICAgICB2YXIgaW5uZXIgPSBlbC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLWlubmVyJyk7XG4gICAgICAgICAgICB2YXIgaW5kaWNhdG9ycyA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXItaW5kaWNhdG9yJyk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uTW91c2VEb3duKGUpIHtcbiAgICAgICAgICAgICAgICBzdGFydFggPSBlLmNsaWVudFggfHwgZS50b3VjaGVzWzBdLmNsaWVudFg7XG4gICAgICAgICAgICAgICAgdG91Y2hlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc3Qgd2Vla2x5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJlc3VsdF9fd2Vla3MtYnRuJyk7XG4gICAgICAgICAgICAgICAgLy8gZm9yIChjb25zdCBpdGVtIG9mIHdlZWtseSkgaXRlbS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgc2VsZWN0V2Vlayk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uTW91c2VNb3ZlKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICBpZiAodG91Y2hlZCkge1xuICAgICAgICAgICAgICAgICAgICBpbm5lciA9IGlubmVyIHx8IGVsLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItaW5uZXInKVxuICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IGUuY2xpZW50WCB8fCBlLnRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpZmYgPSB4IC0gc3RhcnRYO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGRpZmYgPCAwICYmIGFjdGl2ZUluZEluZGV4IDwgaW5kaWNhdG9ycy5sZW5ndGggLSAxKSB8fCAoZGlmZiA+IDAgJiYgYWN0aXZlSW5kSW5kZXggPiAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVgoJyArIGRpZmYgKyAncHgpJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBvbk1vdXNlRW5kKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAodG91Y2hlZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IGUuY2xpZW50WCB8fCBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFg7XG4gICAgICAgICAgICAgICAgICAgIGlmICh4IC0gc3RhcnRYID4gMzApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZUluZGV4KGFjdGl2ZUluZEluZGV4IC0gMSlcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzdGFydFggLSB4ID4gMzApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZUluZGV4KGFjdGl2ZUluZEluZGV4ICsgMSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbm5lciA9IGlubmVyIHx8IGVsLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItaW5uZXInKVxuICAgICAgICAgICAgICAgICAgICBpbm5lci5zdHlsZS50cmFuc2Zvcm0gPSAnJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0b3VjaGVkID0gZmFsc2VcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmlnaHRBcnJvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0b2dnbGVJbmRleChhY3RpdmVJbmRJbmRleCArIDEpXG4gICAgICAgICAgICAgICAgLy8gb2JqLm5leHQoKVxuICAgICAgICAgICAgICAgIGNvdW50ZXJTbGlkZSsrXG4gICAgICAgICAgICAgICAgc2xpZGVyQ291bnQuaW5uZXJIVE1MID0gY291bnRlclNsaWRlO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgbGVmdEFycm93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRvZ2dsZUluZGV4KGFjdGl2ZUluZEluZGV4IC0gMSlcbiAgICAgICAgICAgICAgICAvLyBvYmoucHJldigpXG4gICAgICAgICAgICAgICAgY291bnRlclNsaWRlLS1cbiAgICAgICAgICAgICAgICBzbGlkZXJDb3VudC5pbm5lckhUTUwgPSBjb3VudGVyU2xpZGU7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgb25SZXNpemUpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIG9uUmVzaXplKTtcbiAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uTW91c2VEb3duKTtcbiAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvbk1vdXNlRG93bik7XG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbk1vdXNlRG93bik7XG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25Nb3VzZURvd24pO1xuICAgICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpO1xuICAgICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgb25Nb3VzZU1vdmUpO1xuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpO1xuICAgICAgICAgICAgLy8gZWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgb25Nb3VzZU1vdmUpO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbk1vdXNlRW5kKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uTW91c2VFbmQpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbk1vdXNlRW5kKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uTW91c2VFbmQpO1xuXG4gICAgICAgICAgICBpZiAoYXV0b3BsYXkpIHtcbiAgICAgICAgICAgICAgICB0aW1lcklkID0gc2V0SW50ZXJ2YWwoKCkgPT4gdG9nZ2xlSW5kZXgoKGFjdGl2ZUluZEluZGV4ICsgMSkgJSBpbmRpY2F0b3JzLmxlbmd0aCksIEFVVE9QTEFZX0lOVEVSVkFMKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG9ialxuICAgICAgICB9LFxuICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgIGVsZW1zUGVyUGFnZToge1xuICAgICAgICAgICAgICAgIC4uLntcbiAgICAgICAgICAgICAgICAgICAgJ2xnJzogMSxcbiAgICAgICAgICAgICAgICAgICAgJ21kJzogMSxcbiAgICAgICAgICAgICAgICAgICAgJ3NtJzogMSxcbiAgICAgICAgICAgICAgICAgICAgJ3hzJzogMVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLi4uKChjb25maWcgJiYgY29uZmlnLmVsZW1zUGVyUGFnZSkgfHwge30pXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWVkaWE6IHtcbiAgICAgICAgICAgICAgICAuLi57XG4gICAgICAgICAgICAgICAgICAgICdsZyc6IDExNjAsXG4gICAgICAgICAgICAgICAgICAgICdtZCc6IDkyMCxcbiAgICAgICAgICAgICAgICAgICAgJ3NtJzogNzAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAuLi4oKGNvbmZpZyAmJiBjb25maWcubWVkaWEpIHx8IHt9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBidWlsZFNsaWRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgb2JqLnJlbW92ZVNsaWRlcigpO1xuXG5cbiAgICAgICAgICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIHdyYXBwZXIuY2xhc3NOYW1lID0gJ3NsaWRlci13cmFwcGVyJztcbiAgICAgICAgICAgIHZhciBpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBpbm5lci5jbGFzc05hbWUgPSAnc2xpZGVyLWlubmVyJztcbiAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoaW5uZXIpO1xuICAgICAgICAgICAgZWwuYXBwZW5kQ2hpbGQod3JhcHBlcik7XG5cbiAgICAgICAgICAgIGlmIChvYmouY29uZmlnLmVsZW1zUGVyUGFnZVttZWRpYVN0ZXBdID49IGl0ZW1zLmxlbmd0aCArIDEpIHtcbiAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdub3QtZW5vdWdoLWVsZW1zJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnVpbGRQYWdlcygpO1xuICAgICAgICB9LFxuICAgICAgICAvLyAgICAgZ2V0TWVkaWFTdGVwKCkge1xuICAgICAgICAvLyAgICAgLy8gdmFyIHdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIC8vICAgICAvLyB2YXIgbmV3U3RlcCA9IHdpZHRoID4gbWVkaWFDb25maWcgJiYgbWVkaWFDb25maWcubGcgIT09IHVuZGVmaW5lZCA/IG1lZGlhQ29uZmlnLmxnIDogMTE1MCA/ICdsZydcbiAgICAgICAgLy8gICAgIC8vICAgICA6IHdpZHRoID4gKG1lZGlhQ29uZmlnICYmIG1lZGlhQ29uZmlnLm1kICE9PSB1bmRlZmluZWQgPyBtZWRpYUNvbmZpZy5tZCA6IDc2NykgPyAnbWQnXG4gICAgICAgIC8vICAgICAvLyAgICAgICAgIDogd2lkdGggPiAobWVkaWFDb25maWcgJiYgbWVkaWFDb25maWcuc20gIT09IHVuZGVmaW5lZCA/IG1lZGlhQ29uZmlnLnNtIDogNjAwKSA/ICdzbScgOiAneHMnO1xuICAgICAgICAvL1xuICAgICAgICAvLyAgICAgaWYgKG1lZGlhU3RlcCAhPT0gbmV3U3RlcCkge1xuICAgICAgICAvLyAgICAgICAgIG1lZGlhU3RlcCA9IG5ld1N0ZXA7XG4gICAgICAgIC8vICAgICAgICAgb2JqLmJ1aWxkU2xpZGVyKCk7XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vIH0sXG4gICAgICAgIHJlbW92ZVNsaWRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSBlbC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLXdyYXBwZXInKTtcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ25vdC1lbm91Z2gtZWxlbXMnKVxuICAgICAgICAgICAgd3JhcHBlciAmJiB3cmFwcGVyLnJlbW92ZSgpO1xuICAgICAgICAgICAgaWYgKHRpbWVySWQpIHtcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB0b2dnbGU6IHRvZ2dsZUluZGV4XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRJbmRpY2F0b3JzKCkge1xuICAgICAgICB2YXIgcHJldkluZCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItaW5kaWNhdG9ycycpO1xuICAgICAgICBwcmV2SW5kICYmIHByZXZJbmQucmVtb3ZlKCk7XG5cbiAgICAgICAgdmFyIGluZGljYXRvcnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgaW5kaWNhdG9ycy5jbGFzc0xpc3QuYWRkKCdzbGlkZXItaW5kaWNhdG9ycycpXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5jZWlsKGl0ZW1zLmxlbmd0aCAvIGdldEl0ZW1zUXVhbnRpdHkoKSk7IGkrKykge1xuICAgICAgICAgICAgbGV0IGluZGljYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgaW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoJ3NsaWRlci1pbmRpY2F0b3InKTtcbiAgICAgICAgICAgIGlmIChpID09PSBhY3RpdmVJbmRJbmRleCkge1xuICAgICAgICAgICAgICAgIGluZGljYXRvci5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluZGljYXRvci5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgaSlcbiAgICAgICAgICAgIGluZGljYXRvci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0b2dnbGVJbmRleChpKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGluZGljYXRvcnMuYXBwZW5kQ2hpbGQoaW5kaWNhdG9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB3cmFwcGVyID0gZWwucXVlcnlTZWxlY3RvcignLnNsaWRlci13cmFwcGVyJylcbiAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChpbmRpY2F0b3JzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZFBhZ2VzKHN0ZXApIHtcbiAgICAgICAgc3RlcCA9IHN0ZXAgfHwgMTtcbiAgICAgICAgdmFyIHBhZ2VQcmV2ID0gYnVpbGRQYWdlKG9iai5hY3RpdmVJbmRleCArIGl0ZW1zLmxlbmd0aCAtIGdldEl0ZW1zUXVhbnRpdHkoKSAqIHN0ZXApO1xuICAgICAgICB2YXIgcGFnZUN1cnJlbnQgPSBidWlsZFBhZ2Uob2JqLmFjdGl2ZUluZGV4KVxuICAgICAgICB2YXIgcGFnZU5leHQgPSBidWlsZFBhZ2Uob2JqLmFjdGl2ZUluZGV4ICsgZ2V0SXRlbXNRdWFudGl0eSgpICogc3RlcCk7XG4gICAgICAgIHZhciBpbm5lciA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItaW5uZXInKTtcbiAgICAgICAgaWYgKGdldEl0ZW1zUXVhbnRpdHkoKSA8IGl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgYnVpbGRJbmRpY2F0b3JzKCk7XG4gICAgICAgICAgICBpZiAoIWVsLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItaW5kaWNhdG9yLmFjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgLy8gdG9nZ2xlSW5kZXgoMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaW5uZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIGlubmVyLmFwcGVuZENoaWxkKHBhZ2VQcmV2KVxuICAgICAgICBpbm5lci5hcHBlbmRDaGlsZChwYWdlQ3VycmVudClcbiAgICAgICAgaW5uZXIuYXBwZW5kQ2hpbGQocGFnZU5leHQpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRQYWdlKGluZGV4KSB7XG4gICAgICAgIHZhciBwYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICAgICAgICBwYWdlLmNsYXNzTGlzdC5hZGQoJ3NsaWRlci1wYWdlJylcbiAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4OyBpIDwgKGluZGV4ICsgZ2V0SXRlbXNRdWFudGl0eSgpKTsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgaXRlbSA9IGl0ZW1zW2kgJSBpdGVtcy5sZW5ndGhdO1xuICAgICAgICAgICAgbGV0IG5ld0l0ZW0gPSBpdGVtLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgIHBhZ2UuYXBwZW5kQ2hpbGQobmV3SXRlbSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFnZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0b2dnbGVJbmRleChpbmRleCkge1xuICAgICAgICB2YXIgaW5kQWN0aXZlID0gZWwucXVlcnlTZWxlY3RvcignLnNsaWRlci1pbmRpY2F0b3IuYWN0aXZlJylcbiAgICAgICAgdmFyIGluZGljYXRvcnMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyLWluZGljYXRvcicpO1xuICAgICAgICBpZiAoIWluZGljYXRvcnNbaW5kZXhdKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGxlZnRBcnJvdy5jbGFzc0xpc3QucmVtb3ZlKCdhcnJvdy1kaXNhYmxlZCcpO1xuICAgICAgICByaWdodEFycm93LmNsYXNzTGlzdC5yZW1vdmUoJ2Fycm93LWRpc2FibGVkJyk7XG5cbiAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICBsZWZ0QXJyb3cuY2xhc3NMaXN0LmFkZCgnYXJyb3ctZGlzYWJsZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbmRleCA9PT0gaW5kaWNhdG9ycy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICByaWdodEFycm93LmNsYXNzTGlzdC5hZGQoJ2Fycm93LWRpc2FibGVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpbmRBY3RpdmUgJiYgaW5kQWN0aXZlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXG4gICAgICAgIGluZGljYXRvcnNbaW5kZXhdICYmIGluZGljYXRvcnNbaW5kZXhdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXG4gICAgICAgIGlmIChpbmRleCA+IGFjdGl2ZUluZEluZGV4KSB7XG4gICAgICAgICAgICBpbmRleCAtIGFjdGl2ZUluZEluZGV4ID4gMSAmJiBidWlsZFBhZ2VzKGluZGV4IC0gYWN0aXZlSW5kSW5kZXgpXG4gICAgICAgICAgICBvYmoubmV4dCgpO1xuICAgICAgICB9IGVsc2UgaWYgKGluZGV4IDwgYWN0aXZlSW5kSW5kZXgpIHtcbiAgICAgICAgICAgIGFjdGl2ZUluZEluZGV4IC0gaW5kZXggPiAxICYmIGJ1aWxkUGFnZXMoYWN0aXZlSW5kSW5kZXggLSBpbmRleClcbiAgICAgICAgICAgIG9iai5wcmV2KClcbiAgICAgICAgfVxuICAgICAgICBhY3RpdmVJbmRJbmRleCA9IGluZGV4XG4gICAgICAgIC8vIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdXJyZW50JykudGV4dENvbnRlbnQgPSBhY3RpdmVJbmRJbmRleCArIDE7XG4gICAgfVxuXG4gICAgb2JqLnByZXYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB3cmFwcGVyID0gZWwucXVlcnlTZWxlY3RvcignLnNsaWRlci13cmFwcGVyJylcbiAgICAgICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCdwcmV2Jyk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKCdwcmV2JylcbiAgICAgICAgICAgIG9iai5hY3RpdmVJbmRleCA9IChvYmouYWN0aXZlSW5kZXggLSBnZXRJdGVtc1F1YW50aXR5KCkgKyBpdGVtcy5sZW5ndGgpICUgaXRlbXMubGVuZ3RoO1xuICAgICAgICAgICAgYnVpbGRQYWdlcygpXG4gICAgICAgIH0sIDMwMCk7XG4gICAgfVxuXG4gICAgb2JqLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB3cmFwcGVyID0gZWwucXVlcnlTZWxlY3RvcignLnNsaWRlci13cmFwcGVyJylcbiAgICAgICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCduZXh0Jyk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKCduZXh0JylcbiAgICAgICAgICAgIG9iai5hY3RpdmVJbmRleCA9IChvYmouYWN0aXZlSW5kZXggKyBnZXRJdGVtc1F1YW50aXR5KCkgKyBpdGVtcy5sZW5ndGgpICUgaXRlbXMubGVuZ3RoO1xuICAgICAgICAgICAgYnVpbGRQYWdlcygpXG4gICAgICAgIH0sIDMwMCk7XG4gICAgfVxuICAgIHJldHVybiBvYmouaW5pdCgpO1xufVxuIiwiIl19
